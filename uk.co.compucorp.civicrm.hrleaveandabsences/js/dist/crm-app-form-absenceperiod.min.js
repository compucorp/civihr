define("leave-absences/crm/app",[],function(){return{Form:{},List:{}}}),define("leave-absences/crm/app.form.absenceperiod",["leave-absences/crm/app"],function(e){return e.Form.AbsencePeriod=function(e,t){function n(){this._formElement=e("form#AbsencePeriod"),this._saveButton=e("#_qf_AbsencePeriod_next-bottom"),this._addEventListeners()}return n.prototype._addEventListeners=function(){this._saveButton.on("click",this._onSaveButtonClick.bind(this))},n.prototype._onSaveButtonClick=function(e){e.preventDefault(),this._setSaveButtonValidatingState(),this._validateOrder()},n.prototype._validateOrder=function(){var e=null,t={weight:document.getElementById("weight").value};(e=document.getElementsByName("_id")[0].value)&&(t.id={"!=":e}),CRM.api3("AbsencePeriod","getcount",t).done(this._validateOrderAPICallback.bind(this))},n.prototype._validateOrderAPICallback=function(e){this._unsetSaveButtonValidatingState(),e.result>0?this._showConfirmation():this._submitForm()},n.prototype._showConfirmation=function(){CRM.confirm({title:t("Alert"),message:t("Another period has this order number. If you choose to continue all periods with the same or greater order number will be increased by 1 and hence will follow this period"),width:"30%",options:{yes:t("Yes"),no:t("No")}}).on("crmConfirm:yes",this._submitForm.bind(this))},n.prototype._submitForm=function(){this._formElement.submit()},n.prototype._setSaveButtonValidatingState=function(){this._saveButton.attr("disabled","disabled"),this._saveButton.val(t("Validating order..."))},n.prototype._unsetSaveButtonValidatingState=function(){this._saveButton.removeAttr("disabled"),this._saveButton.val(t("Save"))},n}(CRM.$,ts),e}),function(e){e(["leave-absences/crm/app.form.absenceperiod"],function(e){CRM.$(document).trigger("hrappready.formabsenceperiod",[e])})}(require),define("crm-app-form-absenceperiod",function(){});
//# sourceMappingURL=crm-app-form-absenceperiod.js.map